function init(){resize(),hour(),setInterval(hour,1e3),$('[data-toggle="tooltip"]').tooltip(),countdown(),created(),splitPost(),growTextarea(),flashMessage(),notifs(),recherche_ajax(),chat()}function resize(){fullHeight("aside","min")}function fullHeight(t,a){var e=$(document).height();a?$(t).css("min-height",e):$(t).css("height",e)}function hour(){var t=moment().format("H:mm:ss");$(".sideTimer").html(t)}function countdown(){$("[data-countdown]").each(function(){var t=$(this),a=$(this).data("countdown");$(t).countdown(a,function(a){var e=a.strftime("%-D"),n=a.strftime("%H");if(0!=e)var e="24";var n=parseInt(e)+parseInt(n);if("10">n)var n="0"+n;var o=a.strftime(n+":%M:%S");$(t).html(o),"00:00:00"==o&&$(t).parents(".post").hasClass("post-split")&&($(t).delay(1e5).parents(".column-item").slideUp(500,function(){$(this).remove()}),console.log("done"))})})}function created(){$("[data-created]").each(function(){moment.locale("fr");var t=$(this).data("created"),t=moment(t,"YYYY/MM/DD H:m:s").fromNow();$(this).html(t)})}function splitPost(){$(".post-split").each(function(){var t=$(this).find(".content").text(),a=150;t.length>a&&(t=t.substring(0,a),$(this).find(".content").html(t+" [...]"))})}function growTextarea(){$("textarea.grow").click(function(){var t=$(this).data("open"),a=$(this);0==t&&($(a).stop().animate({"min-height":"10rem"}),$(a).data("open",!0))}),$("*").click(function(t){if(!$(t.target).is("textarea.grow")){var a=$("textarea.grow"),e=$(a).data("open");1==e&&$(a).val()<1&&($(a).stop().animate({"min-height":"3.4rem"}),$(a).data("open",!1))}})}function flashMessage(){$(".flash").hide().fadeIn("slow").delay(5e3).fadeOut(),$(".flash-close").click(function(){return $(this).parent().fadeOut("slow"),!1})}function notifs(){$(".notif-icon").click(function(){var t=$(".notif-alert ul").data("open");return 0==t?($(".notif-alert ul").fadeIn(),$(".notif-alert ul").data("open",!0)):($(".notif-alert ul").fadeOut(),$(".notif-alert ul").data("open",!1)),!1}),$("*").click(function(t){if(!$(t.target).is(".notif-alert *")){var a=$(".notif-alert ul").data("open");1==a&&($(".notif-alert ul").fadeOut(),$(".notif-alert ul").data("open",!1))}})}function recherche_ajax(){$("#form_recherche").keyup(function(){var t=$(this),a=$(t).find("input");return console.log($(a).val()),($(a).val().length>=3||""==$(a).val())&&$.ajax({url:$(t).attr("action"),data:$(t).serialize(),success:function(t){console.log(t)}}),!1})}function chat(){$(".chat").each(function(){var t=$(this),a=$(t).data("open");0==a&&$(t).find(".chat-close").hide()}),$(document).on("click",".chat .chat-header a",function(){var t=$(this),a=$(t).parents(".chat").data("open");return 1==a?$(t).parents(".chat").data("open",!1).find(".chat-close").hide():$(t).parents(".chat").data("open",!0).find(".chat-close").show(),!1}),$(document).on("click",".chat .chat-header .icon-close",function(){return $(this).parents(".chat").remove(),!1}),$(".chat-btn").click(function(){var t=$(this).data("username"),a=$('.chat[data-username="'+t+'"]');if(2==$(".chat").length&&0==$(a).length)console.log("length == 2"),$("body").prepend('\n				<ul class="flash">\n				<li class="flash-error"><span class="flash-icon"><span class="icon-close"></span></span>\n				Vous ne pouvez avoir que 2 chat d\'ouvert simultanement\n				<a href="#" class="flash-close"><span class="icon-close"></span></a>\n				</li>\n				</ul>\n			'),flashMessage();else if($(a).length>0){console.log("length > 0");var e=$(a).data("open");0==e&&$(a).data("open",!0).find(".chat-close").show()}else console.log("length == 0"),$(".chat-container").append("<div class='chat' data-username="+t+" data-open='true'><div><div class='chat-header'><a href='#'>"+t+"<span class='icon-close'></span></a></div><div class='chat-close chat-content'></div><div class='chat-close chat-footer'><form><input type='text' placeholder='Ecrire un message' class='form-control' /></form></div></div>");return!1})}$(function(){init(),$(window).resize(function(){resize()})}),"#_=_"==window.location.hash&&(window.location.hash="",history.pushState("",document.title,window.location.pathname),e.preventDefault());
